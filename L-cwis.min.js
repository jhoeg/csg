void 0===window.L?console.warn("[L-cwis] leaflet must be loaded... L-cwis api may not work correctly."):parseFloat(L.version)<1&&console.warn("[L-cwis] leaflet version 1+ required... L-cwis api may not work correctly."),L.cwis=(o=>{const e={filter:void 0,type:void 0,theme:void 0,markerOptions:{},popup:!0,popupOptions:{},tooltip:!0,tooltipOptions:{},autoRefresh:!0,autoSize:1,onSuccess:void 0,onRefresh:void 0,onError:void 0},t=Object.keys(e);Object.keys(o).forEach(o=>{t.includes(o)||console.warn(`[L.cwis] unrecognized option "${o}" ignored.`)});const i=L.featureGroup([]);return i.options=L.cwis.merge(e,o||{}),i.setOpacity=(o=>(i.options.markerOptions.opacity=o,i.options.markerOptions.fillOpacity=o,i.setStyle({opacity:o,fillOpacity:o}))),i.setRadius=(o=>{if(!1!==i.options.autoSize||void 0!==o)return"number"==typeof i.options.autoSize?o=i.options.autoSize*Math.min(Math.max(i._map.getZoom()-2,3),8):"function"==typeof i.options.autoSize&&(o=i.options.autoSize(i._map.getZoom())),i.options.markerOptions.radius=o,i.setStyle({radius:o})}),i.setOptions=(o=>{Object.keys(o).forEach(o=>{t.includes(o)||console.warn(`[L.cwis] unrecognized option "${o}" ignored.`)});const e=o.filter&&o.filter!==i.options.filter||o.type&&o.type!==i.options.type;return i.options=L.cwis.merge(i.options,o),e?L.cwis._refresh(i):L.cwis._redraw(i)}),i.refresh=(()=>L.cwis._refresh(i)),L.cwis._init(i)}),L.cwis.version="1.0",L.cwis._config={cwisUrl:"https://dashboard.waterdata.usgs.gov/service/cwis/1.0/odata/CurrentConditions",gwisUrl:"https://dashboard.waterdata.usgs.gov/api/gwis/2.0",subscribeUrl:"https://water.usgs.gov/wateralert/subscribe2",siteUrl:"https://waterdata.usgs.gov/monitoring-location",dataUrl:"https://waterdata.usgs.gov/nwis/inventory",refreshIntervalMs:12e4,valueAgeMaxHr:4,nSitesMax:800,getPreFilter:()=>"("+["AccessLevelCode eq 'P'","IsPrimary eq true","Value ne null",`TimeUtc gt ${new Date(Date.now()-60*L.cwis._config.valueAgeMaxHr*60*1e3).toISOString()}`].join(") and (")+")",typeFilters:{flow:"startswith(SiteTypeCode,'ST') and ParameterCode eq '00060'",stage:"startswith(SiteTypeCode,'ST') and ParameterCode eq '00065'",lake:"SiteTypeCode eq 'LK' and ParameterCode in ('72335','72275','72264','72214','72020','62614','62615','62616','00065','00062')",well:"startswith(SiteTypeCode,'GW') and ParameterCode in ('62610','62611','72019','72150','72229')",rain:"ParameterCode in ('00045','72192','00193','72194','99772')"},cwisProperties:["AgencyCode","SiteNumber","SiteName","Latitude","Longitude","CurrentConditionID","ParameterCode","ParameterName","ParameterUnit","TimeLocal","TimeZoneCode","Value","RateOfChangeUnitPerHour","StatisticStatusCode","FloodStageStatusCode"],caller:`L-cwis-${L.cwis.version}`},L.cwis._init=(o=>(o._refreshInterval=setInterval(()=>{o.options.autoRefresh&&o._map&&document.getElementsByClassName("leaflet-popup").length<=0&&L.cwis._refresh(o)},L.cwis._config.refreshIntervalMs),o._zoomend=(()=>o.setRadius()),o.on("add",()=>{o._json||L.cwis._refresh(o),o.setRadius(),o._map.on("zoomend",o._zoomend)}),o.on("remove",()=>{o._map.off("zoomend",o._zoomend)}),o)),L.cwis._refresh=(o=>{const e=L.cwis._config,t=o.options,i=e=>{console.warn(`[L.cwis] service error: ${e}`),"function"==typeof t.onError&&t.onError(o,e),o._refreshInterval&&clearInterval(o._refreshInterval)},r=[L.cwis._config.getPreFilter()];if(e.typeFilters[t.type]&&r.push(e.typeFilters[t.type]),!t.filter||""===t.filter.trim())return void i('"filter" option must be specified and non-empty.');r.push(t.filter);const s=e.cwisUrl+"?"+["$filter="+encodeURIComponent("("+r.join(") and (")+")"),"$select="+e.cwisProperties,"$top="+e.nSitesMax,"caller="+e.caller,"_="+Date.now()].join("&");return o._xhr&&4!==o._xhr.readyState&&o._xhr.abort(),o._xhr=new XMLHttpRequest,o._xhr.onreadystatechange=(()=>{if(o._xhr.readyState!==XMLHttpRequest.DONE)return;let r;try{r=JSON.parse(o._xhr.responseText)}catch(o){return void i(`response not json (${o.message})`)}r.error&&r.error.message?i(r.error.message):Array.isArray(r.value)?(r.value.length>=e.nSitesMax&&console.warn(`[L.cwis] warning: max allowed site count exceeded - top ${e.nSitesMax} loaded.`),r.value=r.value.filter((o,e,t)=>t.findIndex(e=>e.AgencyCode===o.AgencyCode&&e.SiteNumber===o.SiteNumber)===e),o._json=r,L.cwis._redraw(o),"function"==typeof t.onSuccess&&(t.onSuccess(o),delete t.onSuccess),"function"==typeof t.onRefresh&&t.onRefresh(o)):i('response does not contain "value" array')}),o._xhr.open("GET",s,!0),o._xhr.send(),o}),L.cwis._redraw=(o=>(o.clearLayers(),o._json.value.forEach(e=>{const t=L.cwis._getMarker(o.options,e);t&&o.addLayer(t)}),o)),L.cwis._getMarker=((o,e)=>{let t={};if(o.type&&o.theme)try{if(t=L.cwis._themeColors[o.type][o.theme](e),!t)return!1;Object.assign(t,{shape:L.cwis._themeShapes[o.type],radius:6,weight:2,fillOpacity:1})}catch(e){return console.warn(`[L.cwis] invalid "type" option ("${o.type}") and/or "theme" option ("${o.theme}").`),!1}let i=o.markerOptions||{};if("function"==typeof i&&(i=i(e)),!i)return!1;t=L.cwis.merge(t,i),t.interactive=o.popup||o.tooltip,o.tooltipOptions.interactive=o.popup&&o.tooltip;let r,s=L.cwis.marker([e.Latitude,e.Longitude],t);return o.popup&&(r="function"==typeof o.popup?o.popup(e):L.cwis._getPopupContent(e),r&&s.bindPopup(r.toString(),o.popupOptions)),o.tooltip&&!L.Browser.mobile&&(r="function"==typeof o.tooltip?o.tooltip(e):L.cwis._getTooltipContent(e),r&&s.bindTooltip(r.toString(),o.tooltipOptions)),s}),L.cwis._themeShapes={flow:"circle",stage:"circle",lake:"square",well:"triangle-u",rain:"diamond"},L.cwis._themeColors={flow:{status:o=>0===o.Value?{color:"#970",fillColor:"#fff"}:[">MNR",">MOD",">MAJ"].includes(o.FloodStageStatusCode)?{color:"#f49",fillColor:"#fff"}:L.cwis._statusInfo[o.StatisticStatusCode+""].colors,cfs:o=>{let e=o.Value;return null!==e&&("ft3/s"!==o.ParameterUnit?L.cwis._grayColors:(e=Math.abs(e),e>1e5?{color:"#015",fillColor:"#239"}:e>1e4?{color:"#239",fillColor:"#25a"}:e>1e3?{color:"#25a",fillColor:"#19c"}:e>100?{color:"#19c",fillColor:"#4bc"}:e>10?{color:"#4bc",fillColor:"#7cb"}:e>0?{color:"#7cb",fillColor:"#ceb"}:{color:"#970",fillColor:"#fff"}))},cfs0:o=>0===o.Value&&{color:"#970",fillColor:"#fff"}},stage:{status:o=>[">MNR",">MOD",">MAJ"].includes(o.FloodStageStatusCode)?{color:"#f49",fillColor:"#fff"}:L.cwis._statusInfo[o.StatisticStatusCode+""].colors,rate:o=>{let e=o.RateOfChangeUnitPerHour;return null!==e&&("ft"!==o.ParameterUnit?L.cwis._grayColors:e>1?{color:"#036",fillColor:"#26a"}:e>.5?{color:"#26a",fillColor:"#49c"}:e>.05?{color:"#49c",fillColor:"#9cd"}:e>-.05?{color:"#888",fillColor:"#fff"}:e>-.5?{color:"#d64",fillColor:"#fa8"}:e>-1?{color:"#b12",fillColor:"#d64"}:{color:"#601",fillColor:"#b12"})},flood:o=>!["NOFLOOD","NOMEAS","NA",null].includes(o.FloodStageStatusCode)&&L.cwis._floodInfo[o.FloodStageStatusCode+""].colors,nws:o=>L.cwis._floodInfo[o.FloodStageStatusCode+""].colors},lake:{status:o=>L.cwis._statusInfo[o.StatisticStatusCode+""].colors,rate:o=>{let e=o.RateOfChangeUnitPerHour;return null!==e&&("ft"!==o.ParameterUnit?L.cwis._grayColors:e>.5?{color:"#036",fillColor:"#26a"}:e>.05?{color:"#26a",fillColor:"#49c"}:e>.02?{color:"#49c",fillColor:"#9cd"}:e>-.02?{color:"#888",fillColor:"#fff"}:e>-.05?{color:"#d64",fillColor:"#fa8"}:e>-.5?{color:"#b12",fillColor:"#d64"}:{color:"#601",fillColor:"#b12"})}},well:{status:o=>L.cwis._statusInfo[o.StatisticStatusCode+""].colors,rate:o=>{let e=o.RateOfChangeUnitPerHour;return null!==e&&("ft"!==o.ParameterUnit?L.cwis._grayColors:("72019"===o.ParameterCode&&(e=-e),e*=12,e>6?{color:"#036",fillColor:"#26a"}:e>1?{color:"#26a",fillColor:"#49c"}:e>.5?{color:"#49c",fillColor:"#9cd"}:e>-.5?{color:"#888",fillColor:"#fff"}:e>-1?{color:"#d64",fillColor:"#fa8"}:e>-6?{color:"#b12",fillColor:"#d64"}:{color:"#601",fillColor:"#b12"}))},depth:o=>{let e=o.Value;return null!==e&&("72019"!==o.ParameterCode?L.cwis._grayColors:(e=Math.abs(e),e>250?{color:"#802",fillColor:"#b02"}:e>200?{color:"#b02",fillColor:"#e11"}:e>150?{color:"#e11",fillColor:"#f42"}:e>100?{color:"#f42",fillColor:"#f83"}:e>50?{color:"#f83",fillColor:"#fb4"}:{color:"#fb4",fillColor:"#fd7"}))}},rain:{rate:o=>{let e=o.RateOfChangeUnitPerHour;return null!==e&&("00045"!==o.ParameterCode?L.cwis._grayColors:e>4?{color:"#b24",fillColor:"#f00"}:e>2?{color:"#204",fillColor:"#528"}:e>.4?{color:"#528",fillColor:"#87a"}:e>.1?{color:"#87a",fillColor:"#bad"}:e>0?{color:"#bad",fillColor:"#dde"}:{color:"#888",fillColor:"#fff"})},non0:o=>{let e=o.RateOfChangeUnitPerHour;return!(null===e||e<=0)&&("00045"!==o.ParameterCode?L.cwis._grayColors:e>4?{color:"#b24",fillColor:"#f00"}:e>2?{color:"#204",fillColor:"#528"}:e>.4?{color:"#528",fillColor:"#87a"}:e>.1?{color:"#87a",fillColor:"#bad"}:e>0&&{color:"#bad",fillColor:"#dde"})}}},L.cwis._grayColors={color:"#777777",fillColor:"#a6a6a6"},L.cwis._statusInfo={P0:{colors:{color:"#900",fillColor:"#f00"},description:"All-time low for this day-of-year"},P0_10:{colors:{color:"#611",fillColor:"#b22"},description:"Much below normal for this day-of-year"},P10_25:{colors:{color:"#960",fillColor:"#fa0"},description:"Below normal for this day-of-year"},P25_75:{colors:{color:"#090",fillColor:"#0f0"},description:"Normal for this day-of-year"},P75_90:{colors:{color:"#1aa",fillColor:"#4dd"},description:"Above normal for this day-of-year"},P90_100:{colors:{color:"#009",fillColor:"#00f"},description:"Much above normal for this day-of-year"},P100:{colors:{color:"#000",fillColor:"#005"},description:"All-time high for this day-of-year"},NR_0FLOW:{colors:{color:"#777",fillColor:"#fff"},description:"Not ranked - stream not flowing"},NR_REVFLOW:{colors:{color:"#777",fillColor:"#fff"},description:"Not ranked - stream can have reversible flow"},null:{colors:{color:"#777",fillColor:"#fff"},description:"Not ranked - insufficient record"}},L.cwis._floodInfo={NOFLOOD:{colors:{color:"#72b026",fillColor:"#a0da58"},description:"Not flooding"},">ACT":{colors:{color:"#f9de00",fillColor:"#ffea4d"},description:"In action stage"},">MNR":{colors:{color:"#f69730",fillColor:"#fac185"},description:"In minor flood stage"},">MOD":{colors:{color:"#d63e2a",fillColor:"#e78b7e"},description:"In moderate flood stage"},">MAJ":{colors:{color:"#d252b9",fillColor:"#e59ad6"},description:"In major flood stage"},NOMEAS:{colors:{color:"#777777",fillColor:"#a6a6a6"},description:"No measurement"},NA:{colors:{color:"#777777",fillColor:"#ffffff"},description:"Flood stages not established"},null:{colors:{color:"#777777",fillColor:"#ffffff"},description:"Flood stages not established"}},L.cwis._getPopupContent=(o=>{const e=`${L.cwis._config.gwisUrl}/service/site?agencyCode=${o.AgencyCode}&siteNumber=${o.SiteNumber}&open=${o.CurrentConditionID}`,t=[`width=${Math.min(.9*window.screen.width,1e3)}`,`height=${.8*window.screen.height}`,"left=10","top=10"].join(","),i=[];null===o.StatisticStatusCode||["62610","62611","72019","72150","72229"].includes(o.ParameterCode)||i.push(L.cwis._statusInfo[o.StatisticStatusCode].description),null!==o.RateOfChangeUnitPerHour&&i.push(`Changing ${o.RateOfChangeUnitPerHour.toFixed(1)} ${o.ParameterUnit} per hour`);let r="";i.length&&(r=`<div style="border:1px solid #31708f; background:#ebf3f9; color:#31708f; padding:5px 15px; margin-bottom:5px;">\n        ${'<i class="fas fa-info-circle"></i>&nbsp; '+i.join('<br><i class="fas fa-info-circle"></i>&nbsp; ')}\n    </div>`);let s="";return null!==o.FloodStageStatusCode&&o.FloodStageStatusCode.startsWith(">")&&(s=`<div style="border:1px solid #9f875b; background:#fcf8e3; color:#9f875b; padding:5px 15px; margin-bottom:5px;">\n        <i class="fas fa-exclamation-triangle"></i>&nbsp; ${L.cwis._floodInfo[o.FloodStageStatusCode].description}\n    </div>`),`<div style="min-width:300px;">\n        <!-- title -->\n        ${o.SiteNumber} ${o.SiteName.toUpperCase()}\n        <div style="display:flex; justify-content:left; align-items:center; border-top:1px solid #ddd; margin-top:2px; padding:5px 0 5px;">\n            <!-- plot button -->\n            <div style="text-align:center; border:1px solid #ccc; background:#f8f9fa; margin-right:15px; padding:5px 15px; cursor:pointer;"\n                onmouseover="this.style.background='#e2e6ea'"\n                 onmouseout="this.style.background='#f8f9fa'"\n                    onclick="const win=window.open('${e}','_blank','${t}'); win.focus();"\n            >\n                <img style="width:30px;" src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ4MC4xODIgNDgwLjE4MiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDgwLjE4MiA0ODAuMTgyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij4KPGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjAwLjE4MiwzMi4xMDZjLTkyLjc4NCwwLTE2OCw3NS4yMTYtMTY4LDE2OHM3NS4yMTYsMTY4LDE2OCwxNjhzMTY4LTc1LjIxNiwxNjgtMTY4ICAgIEMzNjguMDgxLDEwNy4zNjQsMjkyLjkyNCwzMi4yMDcsMjAwLjE4MiwzMi4xMDZ6IE0yMDAuMTgyLDQ4LjEwNmM0OS40MTYsMC4wMzksOTUuNzIzLDI0LjEyMywxMjQuMTI4LDY0LjU2bC0yMCwyMCAgICBjLTQuODY3LTIuOTQ1LTEwLjQzOS00LjUyMS0xNi4xMjgtNC41NmMtMTcuNjczLDAtMzIsMTQuMzI3LTMyLDMyYzAuMDI4LDUuNjk1LDEuNTk1LDExLjI3Niw0LjUzNiwxNi4xNTJsLTUyLjM4NCw1Mi4zODQgICAgYy05LjkxOS02LjA0OC0yMi4zODUtNi4wNDgtMzIuMzA0LDBsLTM2LjM4NC0zNi4zODRjMi45NDEtNC44NzYsNC41MDgtMTAuNDU3LDQuNTM2LTE2LjE1MiAgICBjMC4wMjItMTcuNjM4LTE0LjI1OC0zMS45NTQtMzEuODk2LTMxLjk3NmMtMTQuNTg3LTAuMDE4LTI3LjMzMiw5Ljg0OS0zMC45NjgsMjMuOTc2aC0yOS42OCAgICBDNjYuNzg1LDk4LjE1OSwxMjguNjE0LDQ4LjIxMSwyMDAuMTgyLDQ4LjEwNnogTTMwNC4xODIsMTYwLjEwNmMwLDguODM3LTcuMTYzLDE2LTE2LDE2cy0xNi03LjE2My0xNi0xNnM3LjE2My0xNiwxNi0xNiAgICBTMzA0LjE4MiwxNTEuMjY5LDMwNC4xODIsMTYwLjEwNnogTTIwOC4xODIsMjU2LjEwNmMwLDguODM3LTcuMTYzLDE2LTE2LDE2cy0xNi03LjE2My0xNi0xNmMwLTguODM3LDcuMTYzLTE2LDE2LTE2ICAgIFMyMDguMTgyLDI0Ny4yNjksMjA4LjE4MiwyNTYuMTA2eiBNMTI4LjE4MiwxNzYuMTA2YzAsOC44MzctNy4xNjMsMTYtMTYsMTZzLTE2LTcuMTYzLTE2LTE2czcuMTYzLTE2LDE2LTE2ICAgIFMxMjguMTgyLDE2Ny4yNjksMTI4LjE4MiwxNzYuMTA2eiBNMjc0LjAzNiwzMzMuMDEyYy0yMi41OTIsMTIuNTQ0LTQ4LjAxMiwxOS4xMTYtNzMuODU0LDE5LjA5MyAgICBjLTgzLjg5LDAuMDU3LTE1MS45NDMtNjcuOTAyLTE1Mi0xNTEuNzkyYy0wLjAwNC01LjQxNCwwLjI4Mi0xMC44MjUsMC44NTYtMTYuMjA4aDMyLjI4YzMuNjM3LDE0LjA4NSwxNi4zMTcsMjMuOTQ1LDMwLjg2NCwyNCAgICBjNS42OTUtMC4wMjgsMTEuMjc2LTEuNTk1LDE2LjE1Mi00LjUzNmwzNi4zODQsMzYuMzg0Yy0yLjk0MSw0Ljg3Ni00LjUwOCwxMC40NTctNC41MzYsMTYuMTUyYzAsMTcuNjczLDE0LjMyNywzMiwzMiwzMiAgICBzMzItMTQuMzI3LDMyLTMyYy0wLjAyOC01LjY5NS0xLjU5NS0xMS4yNzYtNC41MzYtMTYuMTUybDUyLjM4NC01Mi4zODRjNC44NzYsMi45NDEsMTAuNDU3LDQuNTA4LDE2LjE1Miw0LjUzNiAgICBjMTcuNjczLDAsMzItMTQuMzI3LDMyLTMyYy0wLjAyOC01LjY5NS0xLjU5NS0xMS4yNzYtNC41MzYtMTYuMTUybDE3LjQ0LTE3LjQzMkMzNzMuODAxLDE5OS44NDksMzQ3LjM2MywyOTIuMjk4LDI3NC4wMzYsMzMzLjAxMiAgICB6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8L2c+CjwvZz4KPGc+Cgk8Zz4KCQk8cGF0aCBkPSJNNDAwLjE4Miw4MC4xMDZjMTQuNTQ3LTAuMDU1LDI3LjIyNy05LjkxNCwzMC44NjQtMjRoNDkuMTM2di0xNmgtNDkuMTM2Yy0zLjYzNy0xNC4wODYtMTYuMzE3LTIzLjk0NS0zMC44NjQtMjQgICAgYy0xNy42NzMsMC0zMiwxNC4zMjctMzIsMzJjMC4wMjgsNS42OTUsMS41OTUsMTEuMjc2LDQuNTM2LDE2LjE1MmwtMTQuMDU2LDE0LjA1NkMyOTEuNDA3LTkuMzA3LDE2NS44NTUtMjUuODE3LDc4LjIzNCw0MS40MzggICAgUy0yNS44OTcsMjM0LjI0Niw0MS4zNTgsMzIxLjg2N2M2My40ODQsODIuNzA3LDE3OS44NTUsMTAyLjc3LDI2Ny4zNjgsNDYuMDk1bDI0LjE0NCwyNC4xNDRsMTEuMzEyLDExLjMxMmw2NC40LDY0LjQgICAgYzE2LjM3OSwxNi4zNzksNDIuOTMzLDE2LjM3OSw1OS4zMTIsMGMxNi4zNzktMTYuMzc5LDE2LjM3OS00Mi45MzMsMC01OS4zMTJsLTY0LjQtNjQuNGwtMTEuMzEyLTExLjMxMmwtMjQuMTQ0LTI0LjE0NCAgICBjNDIuODU5LTY2LjAxNiw0Mi44NTktMTUxLjA3MSwwLTIxNy4wODhsMTYtMTZDMzg4LjkxMSw3OC41MDQsMzk0LjQ5LDgwLjA3NCw0MDAuMTgyLDgwLjEwNnogTTQwMC4xODIsMzIuMTA2ICAgIGM4LjgzNywwLDE2LDcuMTYzLDE2LDE2cy03LjE2MywxNi0xNiwxNnMtMTYtNy4xNjMtMTYtMTZTMzkxLjM0NiwzMi4xMDYsNDAwLjE4MiwzMi4xMDZ6IE00NTYuNTgyLDQxOS44MTggICAgYzEwLjI0NiwxMC4wMTYsMTAuNDMzLDI2LjQ0MiwwLjQxNywzNi42ODhjLTEwLjAxNiwxMC4yNDYtMjYuNDQyLDEwLjQzMy0zNi42ODgsMC40MTdjLTAuMTQxLTAuMTM3LTAuMjc5LTAuMjc2LTAuNDE3LTAuNDE3ICAgIGwtNjQuNC02NC40bDM2LjY4OC0zNi42ODhMNDU2LjU4Miw0MTkuODE4eiBNMzgwLjg3LDM0NC4xMDZsLTM2LjY4OCwzNi42ODhsLTIyLjE0NC0yMi4xNDRjMS4xMjgtMC44NjQsMi4xODQtMS44MTYsMy4yOTYtMi43MDQgICAgczIuNC0xLjk1MiwzLjU5Mi0yLjk1MmMxLjc1Mi0xLjQ3MiwzLjQ4LTIuOTYsNS4xNzYtNC40ODhjMC44NzItMC44LDEuNzA0LTEuNiwyLjU2LTIuNGMzLjI4LTMuMDcyLDYuNDU2LTYuMjQ4LDkuNTI4LTkuNTI4ICAgIGMwLjgtMC44NTYsMS42LTEuNjg4LDIuNC0yLjU2YzEuNTI4LTEuNjk2LDMuMDE2LTMuNDI0LDQuNDg4LTUuMTc2YzEuMDAzLTEuMTg0LDEuOTg3LTIuMzgxLDIuOTUyLTMuNTkyICAgIGMwLjg4LTEuMTA0LDEuODMyLTIuMTYsMi42OTYtMy4yODhMMzgwLjg3LDM0NC4xMDZ6IE0zNDkuODQ2LDMwNi45NDZjLTIuNTIsMy41Mi01LjEyLDYuOTY4LTcuODY0LDEwLjI4OCAgICBjLTAuOCwwLjk2OC0xLjY1NiwxLjkwNC0yLjQ4LDIuODU2Yy0yLjQ0OCwyLjg0OC00Ljk3Niw1LjYxMS03LjU4NCw4LjI4OGMtMS4xMzYsMS4xNzMtMi4yOTEsMi4zMjgtMy40NjQsMy40NjQgICAgYy0yLjY2NywyLjYwOC01LjQyOSw1LjEzNi04LjI4OCw3LjU4NGMtMC45NTIsMC44LTEuODg4LDEuNjcyLTIuODU2LDIuNDhjLTMuMzIsMi43NDQtNi43NjgsNS4zNDQtMTAuMjg4LDcuODY0ICAgIGMtODIuODE2LDU5LjE2NS0xOTcuOTE1LDM5Ljk5Mi0yNTcuMDgtNDIuODI0UzkuOTUsMTA5LjAzMSw5Mi43NjYsNDkuODY2UzI5MC42ODEsOS44NzMsMzQ5Ljg0Niw5Mi42OSAgICBDMzk1LjYyNywxNTYuNzcyLDM5NS42MjcsMjQyLjg2NCwzNDkuODQ2LDMwNi45NDZ6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8L2c+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==">\n                <div>Graphs</div>\n            </div>\n            <!-- measurement -->\n            <div>\n                ${o.ParameterName}<br>\n                <b>${o.Value} &nbsp;${o.ParameterUnit}</b><br>\n                <b>${o.TimeLocal.replace("T"," ").replace(/:[0-9]{2}Z$/u,"")} ${o.TimeZoneCode}</b>\n            </div>\n        </div>\n        <!-- info and flood annotations -->\n        ${r}\n        ${s}\n        <!-- bottom buttons -->\n        <div style="display:flex; text-align:center; cursor:pointer;">\n            <!-- subscribe -->\n            <div style="flex-basis:0; flex-grow:1; border:1px solid #ccc; background:#f8f9fa; padding:5px;"\n                onmouseover="this.style.background='#e2e6ea'"\n                 onmouseout="this.style.background='#f8f9fa'"\n                    onclick="window.open('${L.cwis._config.subscribeUrl}?site_no=${o.SiteNumber}&type_cd=ALL','_blank')"\n            >\n                <i class="fas fa-external-link-alt"></i> Subscribe\n            </div>\n            <!-- site page -->\n            <div style="flex-basis:0; flex-grow:1; border:1px solid #ccc; background:#f8f9fa; padding:5px; margin:0 5px;"\n                onmouseover="this.style.background='#e2e6ea'"\n                 onmouseout="this.style.background='#f8f9fa'"\n                    onclick="window.open('${L.cwis._config.siteUrl}/${o.SiteNumber}/','_blank')"\n            >\n                <i class="fas fa-external-link-alt"></i> Site Page\n            </div>\n            <!-- data -->\n            <div style="flex-basis:0; flex-grow:1; border:1px solid #ccc; background:#f8f9fa; padding:5px;"\n                onmouseover="this.style.background='#e2e6ea'"\n                 onmouseout="this.style.background='#f8f9fa'"\n                    onclick="window.open('${L.cwis._config.dataUrl}?site_no=${o.SiteNumber}','_blank')"\n            >\n                <i class="fas fa-external-link-alt"></i> Data\n            </div>\n        </div>\n    </div>`}),L.cwis._getTooltipContent=(o=>`\n        <div style="text-align:center;">\n            ${o.SiteName.toUpperCase()}<br>\n            ${o.ParameterName}: ${o.Value.toLocaleString()}\n        </div>`),L.cwis.merge=((...o)=>{let e=!0,t=0;"boolean"==typeof o[0]&&(e=o[0],t++);let i={};const r=o=>{for(let t in o)o.hasOwnProperty(t)&&(e&&"[object Object]"===Object.prototype.toString.call(o[t])?i[t]=L.cwis.merge(i[t],o[t]):i[t]=o[t])};for(;t<o.length;t++)r(o[t]);return i}),L.cwis.Marker=L.Path.extend({options:{fill:!0,shape:"circle",radius:10,rotDeg:0},initialize:function(o,e){L.setOptions(this,e),this._latlng=L.latLng(o),this._radius=this.options.radius},setLatLng:function(o){return this._latlng=L.latLng(o),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){let e=o&&o.radius||this._radius;return L.Path.prototype.setStyle.call(this,o),this.setRadius(e),this},toGeoJSON:function(){return L.GeoJSON.getFeature(this,{type:"Point",coordinates:L.GeoJSON.latLngToCoords(this.getLatLng())})},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){let o=this._radius,e=this._radiusY||o,t=this._clickTolerance(),i=[o+t,e+t];this._pxBounds=new L.Bounds(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateShape(this)},_empty:function(){return this._size&&!this._renderer._bounds.intersects(this._pxBounds)}}),L.cwis.marker=((o,e)=>new L.cwis.Marker(o,e)),L.SVG.include({_updateShape:function(o){const e={triangle:{shape:"3gon",rotRad:0},"triangle-u":{shape:"3gon",rotRad:0},"triangle-d":{shape:"3gon",rotRad:Math.PI},"triangle-l":{shape:"3gon",rotRad:Math.PI/2},"triangle-r":{shape:"3gon",rotRad:3*Math.PI/2},square:{shape:"4gon",rotRad:Math.PI/4},diamond:{shape:"4gon",rotRad:0},pentagon:{shape:"5gon",rotRad:0},hexagon:{shape:"6gon",rotRad:0},heptagon:{shape:"7gon",rotRad:0},octagon:{shape:"8gon",rotRad:Math.PI/8},nonagon:{shape:"9gon",rotRad:0},decagon:{shape:"10gon",rotRad:0},star:{shape:"5star",rotRad:0},cross:{shape:"4cross",rotRad:0},plus:{shape:"4cross",rotRad:0},x:{shape:"4cross",rotRad:Math.PI/4},asterisk:{shape:"6cross",rotRad:0}};let t=o.options.shape.toLowerCase();const i=e[t];t=i?i.shape:t;const r=i?i.rotRad:0;let s,l=!1,a=!1,n=!1,c=o._radius;if(/^[0-9]+gon$/iu.test(t)?(l=!0,s=parseFloat(t),c*=1.3):/^[0-9]+star$/iu.test(t)?(a=!0,s=2*parseFloat(t),c*=1.6):/^[0-9]+cross$/iu.test(t)&&(n=!0,s=parseFloat(t)),void 0===s)return void this._updateCircle(o);const M=-o.options.rotDeg*Math.PI/180,L=o._point;let u=(o,e)=>{const t=Math.PI-2*e*Math.PI/s+r+M,i=o*Math.sin(t),l=o*Math.cos(t);return`${L.x+i},${L.y+l}`},d="M"+u(c,0);for(let o=1;o<=s;o++)l?d+=" L"+u(c,o):a?d+=" L"+u(o%2?.35*c:c,o):n&&(d+="L"+L.x+","+L.y+"M"+u(c,o));this._setPath(o,d)}}),console.log(`[L-cwis] version ${L.cwis.version} loaded and ready`);